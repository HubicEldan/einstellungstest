<div class="main-calendar-page">
  <div class="row main-calendar-page__date-range-section">
    <div class="col-6">
      <strong class="fs-5"
        >{{ selectedDate | date: "d" }} - {{ weekDaysArray[6] | date: "d" }}
        {{ selectedDate | date: "MMMM" }}
        {{ selectedDate | date: "y" }}
      </strong>
    </div>
    <div class="col-6 text-end main-calendar-page__chevrons">
      <i class="pi pi-chevron-left me-2" (click)="previousWeek(true)"></i
      ><i class="pi pi-chevron-right" (click)="nextWeek(true)"></i>
    </div>
  </div>
  <div class="row main-calendar-page__week-range-section">
    <div class="col-1"></div>
    <div class="col text-center" *ngFor="let days of getWeekRange()">
      {{ days | date: "d EE" }}
    </div>
  </div>

  <div class="main-calendar-page__month-range-section overflow-auto">
    <div
      class="row border-top"
      *ngFor="let hours of hoursAndMinutesRangeArray; index as i"
    >
      <div class="col-1 border-end main-calendar-page__hours">
        {{ hours[0] | date: "HH:mm" }}
        <div
          [id]="minutes | date: 'mm'"
          *ngFor="let minutes of hoursAndMinutesRangeArray[i]"
        >
          <div style="font-size: 0.01rem">{{ minutes | date: "mm" }}</div>
        </div>
      </div>
      <div
        class="col text-center border-end"
        *ngFor="let days of weekDaysArray; index as j"
        [id]="i"
      >
        <!-- {{ days | date: "dd.MM.yyyy" }} -->
        <!-- <div *ngFor="let appointment of appointments; index as i">
          <div
            class="main-calendar-page__appointment"
            (mouseover)="changeStyle($event)"
            (mouseout)="changeStyle($event)"
            *ngIf="appointment.hours === hours && appointment.date === days"
            (click)="openDialog(nodes[i], nodes[i + 1])"
          >
           <div class="pt-1"> VIEWINGS</div>
          </div>
        </div> -->
        <div *ngFor="let node of nodes">
          <div
            *ngIf="
              (node.date | date: 'dd.MM.yyyy') ===
                (days | date: 'dd.MM.yyyy') &&
              (subtractHours(node.date, 2) | date: 'HH:mm') ===
                (hours[0] | date: 'HH:mm')
            "
            (click)="openDialog(node)"
          >
           {{node.id}}
            <div>
              <div class="row" >
                <div class="col" *ngFor="let sameDayApp of sameDaySameHourAppointments">
                  <span *ngIf="((sameDayApp.date | date: 'dd.MM.yyyy') === (node.date | date: 'dd.MM.yyyy')) && ((sameDayApp.date | date: 'HH:mm') === (node.date | date: 'HH:mm'))">1</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
